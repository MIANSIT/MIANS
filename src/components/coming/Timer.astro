---
const { launchDate } = Astro.props;
---

<div class="countdown flex flex-wrap justify-center gap-6 text-center" data-launch={launchDate}>
  <!-- Days -->
  <div
    class="time-box bg-gray-100 dark:bg-zinc-900/70 border-gray-300 dark:border-zinc-700
    shadow-md relative
    w-24 rounded-xl border
    p-4 backdrop-blur-md transition duration-300
    hover:scale-105
    hover:shadow-[0_0_20px_rgba(0,0,0,0.3)]
    dark:hover:shadow-[0_0_25px_rgba(255,255,255,0.6)]"
  >
    <div
      class="text-black flex h-16 items-center justify-center rounded-lg text-4xl font-bold tracking-wider dark:text-white"
    >
      <span class="days">00</span>
    </div>
    <div class="text-gray-600 dark:text-zinc-400 mt-2 text-xs uppercase tracking-[0.2em]">Days</div>
  </div>

  <!-- Hours -->
  <div
    class="time-box bg-gray-100 dark:bg-zinc-900/70 border-gray-300 dark:border-zinc-700
    shadow-md relative
    w-24 rounded-xl border
    p-4 backdrop-blur-md transition duration-300
    hover:scale-105
    hover:shadow-[0_0_20px_rgba(0,0,0,0.3)]
    dark:hover:shadow-[0_0_25px_rgba(255,255,255,0.6)]"
  >
    <div
      class="text-black flex h-16 items-center justify-center rounded-lg text-4xl font-bold tracking-wider dark:text-white"
    >
      <span class="hours">00</span>
    </div>
    <div class="text-gray-600 dark:text-zinc-400 mt-2 text-xs uppercase tracking-[0.2em]">
      Hours
    </div>
  </div>

  <!-- Minutes -->
  <div
    class="time-box bg-gray-100 dark:bg-zinc-900/70 border-gray-300 dark:border-zinc-700
    shadow-md relative
    w-24 rounded-xl border
    p-4 backdrop-blur-md transition duration-300
    hover:scale-105
    hover:shadow-[0_0_20px_rgba(0,0,0,0.3)]
    dark:hover:shadow-[0_0_25px_rgba(255,255,255,0.6)]"
  >
    <div
      class="text-black flex h-16 items-center justify-center rounded-lg text-4xl font-bold tracking-wider dark:text-white"
    >
      <span class="minutes">00</span>
    </div>
    <div class="text-gray-600 dark:text-zinc-400 mt-2 text-xs uppercase tracking-[0.2em]">
      Minutes
    </div>
  </div>

  <!-- Seconds -->
  <div
    class="time-box bg-gray-100 dark:bg-zinc-900/70 border-gray-300 dark:border-zinc-700
    shadow-md relative
    w-24 rounded-xl border
    p-4 backdrop-blur-md transition duration-300
    hover:scale-105
    hover:shadow-[0_0_20px_rgba(0,0,0,0.3)]
    dark:hover:shadow-[0_0_25px_rgba(255,255,255,0.8)]"
  >
    <div
      class="text-black animate-pulse flex h-16 items-center justify-center rounded-lg text-4xl font-bold tracking-wider dark:text-white"
    >
      <span class="seconds">00</span>
    </div>
    <div class="text-gray-600 dark:text-zinc-400 mt-2 text-xs uppercase tracking-[0.2em]">
      Seconds
    </div>
  </div>
</div>

<script type="module">
  const container = document.querySelector('.countdown');
  const launch = new Date(container.dataset.launch).getTime();

  const daysEl = container.querySelector('.days');
  const hoursEl = container.querySelector('.hours');
  const minutesEl = container.querySelector('.minutes');
  const secondsEl = container.querySelector('.seconds');
  const redirectUrl = 'https://www.sheihoise.com'; // change this to your target page
  function updateCountdown() {
    const now = new Date().getTime();
    const diff = launch - now;

    if (diff <= 0 || isNaN(launch)) {
      // Clear countdown numbers
      daysEl.textContent = '';
      hoursEl.textContent = '';
      minutesEl.textContent = '';
      secondsEl.textContent = '';

      // Show launched message with clickable link
      container.innerHTML = `
       <div
  class="launched-message cursor-pointer relative flex flex-col items-center justify-center
         p-6 rounded-3xl  shadow-2xl
          font-extrabold text-3xl tracking-widest
         transition-transform duration-500 hover:scale-110 animate-bounce"
>
  <!-- Rocket icon floating above text -->
  <div class="animate-float mb-2 text-5xl">ðŸš€</div>

  <!-- Main launched text with staggered letters -->
  <div class="flex gap-2">
    <span class="animate-fadeIn" style="animation-delay: 0s;">L</span>
    <span class="animate-fadeIn" style="animation-delay: 0.1s;">a</span>
    <span class="animate-fadeIn" style="animation-delay: 0.2s;">u</span>
    <span class="animate-fadeIn" style="animation-delay: 0.3s;">n</span>
    <span class="animate-fadeIn" style="animation-delay: 0.4s;">c</span>
    <span class="animate-fadeIn" style="animation-delay: 0.5s;">h</span>
    <span class="animate-fadeIn" style="animation-delay: 0.6s;">e</span>
    <span class="animate-fadeIn" style="animation-delay: 0.7s;">d</span>
    <span class="animate-fadeIn" style="animation-delay: 0.8s;">!</span>
  </div>

  <!-- Subtext -->
  <div class="mt-3 text-lg font-medium text-yellow-300 tracking-wider animate-pulse">
    Shei Hoise
  </div>
</div>
      `;

      // Add click listener to redirect
      container.querySelector('.launched-message').addEventListener('click', () => {
        window.open(redirectUrl, '_blank', 'noopener,noreferrer');
      });

      clearInterval(interval);
      return;
    }

    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

    daysEl.textContent = days.toString().padStart(2, '0');
    hoursEl.textContent = hours.toString().padStart(2, '0');
    minutesEl.textContent = minutes.toString().padStart(2, '0');
    secondsEl.textContent = seconds.toString().padStart(2, '0');
  }

  const interval = setInterval(updateCountdown, 1000);
  updateCountdown();
</script>
